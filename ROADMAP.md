# Dochi - 로드맵

## 완료됨

### macOS 앱 v1

- [x] 멀티 LLM (OpenAI, Anthropic, Z.AI) SSE 스트리밍
- [x] Apple STT + Supertonic ONNX TTS (10종 한국어)
- [x] 웨이크워드 자모 유사도 매칭 + 연속 대화 모드
- [x] system.md / memory.md 컨텍스트 관리, 메모리 자동 압축
- [x] 다중 사용자 프로필 (별칭, 기억 분리)
- [x] 내장 도구: 웹검색, 미리알림, 알람, 이미지 생성
- [x] MCP 서버 연동
- [x] 프로토콜 기반 DI + 단위 테스트
- [x] 텔레그램 봇 DM 통합(MVP) — 앱 내 수신/스트리밍 응답/도구 진행 스니펫
- [x] 내장 도구 확장 — 설정/에이전트/컨텍스트/프로필/워크스페이스/텔레그램

### 코드 품질 + 클라우드 (Phase 1–2)

- [x] DochiViewModel 모듈화
- [x] 테스트 확장, 에러 핸들링 강화, 매직 넘버 정리
- [x] Supabase 인증 + 컨텍스트/대화/디바이스 클라우드 동기화

---

## Phase 3 — 멀티 에이전트 + 컨텍스트

핵심 차별점. 워크스페이스 기반 컨텍스트 관리와 멀티 에이전트.

**워크스페이스 + 컨텍스트**
- [ ] 멀티 워크스페이스 — 가족/팀 등 목적별 생성 및 전환
- [ ] 워크스페이스 기억 — 멤버 전체 공유, 자동 축적 + 수동 편집
- [ ] 개인 컨텍스트 — 사용자 소유, 워크스페이스 횡단, 직접 편집 UI
- [ ] 디바이스 멀티 워크스페이스 등록 — 한 Mac이 여러 WS에 동시 참여

**에이전트**
- [ ] 에이전트 모델 — `agents/{name}/system.md`, `memory.md`, `config.json`
- [ ] 에이전트별 웨이크워드 라우팅 — 웨이크워드로 워크스페이스까지 결정
- [ ] 에이전트별 기억 분리 — 워크스페이스 기억과 에이전트 고유 기억
- [ ] 에이전트별 권한 시스템 — 도구/명령 범위를 에이전트마다 설정
- [ ] 에이전트 관리 UI — 생성/편집/삭제

## Phase 4 — 스마트 모델 라우팅

상황에 맞는 모델을 자동으로 선택하고, 비용을 최적화한다.

- [ ] API 키 티어 관리 — 프로바이더별 여러 키 등록, 티어(고급/일반/경량) 분류
- [ ] 용도별 모델 매핑 — 간단한 대화는 경량 모델, 코딩/분석은 고급 모델 자동 선택
- [ ] 에이전트별 모델 설정 — 키키는 경량, 코디는 고급 등 에이전트마다 기본 모델 지정
- [ ] 로컬 LLM 지원 — Ollama/llama.cpp 연동, 오프라인 대화, 프라이버시 민감 작업
- [ ] 폴백 체인 — 1차 모델 실패 시 자동으로 대체 모델로 전환

## Phase 5 — 디바이스 제어

에이전트가 macOS를 직접 제어하기 위한 도구 계층.

**핵심**
- [ ] 앱 제어 도구 — `open` + AppleScript (FaceTime, Keynote 등)
- [ ] 코딩 에이전트 연동 — Claude Code/OpenCode 세션 실행, 태스크 위임, 결과 중계
- [ ] 명령 실행 권한 시스템 — 허용/차단 목록, 위험 명령 사용자 확인

**확장**
- [ ] Shell 실행 도구 — bash/zsh 실행, 출력 캡처, 타임아웃
- [ ] 파일 관리 도구 — 읽기/쓰기/검색/이동/삭제
- [ ] Apple Shortcuts 연동 — `shortcuts` CLI로 자동화 실행
- [ ] 스크린샷 도구 — `screencapture` → LLM 이미지 전달
- [ ] 클립보드 도구 — NSPasteboard 읽기/쓰기

## Phase 6 — 멀티 인터페이스

같은 워크스페이스에 다양한 경로로 접근. 디바이스가 투명해진다.

- [x] 텔레그램 봇 DM (MVP, 스트리밍)
- [ ] 텔레그램 피어 메시징
- [ ] 슬랙 봇 (DM + 채널)
- [ ] 피어 간 메시지 라우팅 (텔레그램 → 집 Mac TTS 등)
- [ ] CLI 클라이언트

## Phase 7 — 자동화

- [ ] 태스크 큐 (클라우드 → 디바이스 분배)
- [ ] Heartbeat 기반 백그라운드 에이전트
- [ ] 에이전트 워크플로우 (다단계 작업 체이닝)

## Phase 8 — 경험

- [ ] 3D 아바타 (대화 반응, 립싱크)
- [ ] iOS 컴패니언 앱
