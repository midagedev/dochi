# Dochi - 컨셉 문서

## 정의

Dochi는 개인 단말을 위한 범용 LLM 인터페이스입니다. macOS 네이티브 앱을 중심으로, CLI, 메신저 봇, 웹 등 다양한 인터페이스에서 동일한 컨텍스트로 AI를 사용할 수 있습니다.

## 이름

"도치"는 고슴도치에서 따왔습니다. 부르기 쉬운 이름이 필요했습니다.

## 핵심 목표

**나의 AI 컨텍스트가 인터페이스와 기기를 넘어 따라다닌다.**

- 하나의 페르소나와 기억을 macOS 앱, CLI, 텔레그램, 슬랙에서 공유
- 기기마다 Dochi가 깔려 있으면, 클라우드를 통해 컨텍스트 동기화
- 용도에 맞게 쉽게 특화 — 가족용, 개발용, 업무용을 `system.md` 하나로 전환

## 설계 원칙

1. **로컬 우선** — 핵심 기능은 오프라인에서도 동작. 클라우드는 동기화와 확장을 위한 레이어
2. **쉬운 특화** — 마크다운 파일 편집만으로 페르소나와 동작을 바꿀 수 있음
3. **투명하게** — 오픈소스, 데이터 흐름이 명확
4. **확장 가능하게** — 프로토콜 기반 구조, MCP로 도구 확장

## 아키텍처 비전

```
                    ┌─────────────────────────┐
                    │   Supabase (클라우드)     │
                    │  Auth / Context DB /     │
                    │  편집 히스토리 / 디바이스   │
                    └────────┬────────────────┘
                             │
            ┌────────────────┼────────────────┐
            │                │                │
     ┌──────┴──────┐  ┌─────┴─────┐  ┌──────┴──────┐
     │ macOS 앱    │  │   CLI     │  │ 메신저 봇   │
     │ (네이티브)   │  │ (터미널)  │  │ TG / Slack  │
     └─────────────┘  └───────────┘  └─────────────┘
```

### 클라우드 컨텍스트

- **계층 구조**: 클라우드 베이스 컨텍스트 + 기기/인터페이스별 로컬 오버라이드
- **편집 히스토리**: 컨텍스트 변경 이력을 모두 추적
- **디바이스 관리**: Dochi가 설치된 기기 목록 조회 및 상태 확인

### 에이전트 오케스트레이션

- **Heartbeat 기반 작업**: 백그라운드에서 주기적으로 실행되는 에이전트 태스크
- **칸반 태스크 관리**: 에이전트가 수행할 작업을 칸반 보드로 관리, 상태 추적

### 인터페이스

| 인터페이스 | 입력 | 출력 | 상태 |
|-----------|------|------|------|
| macOS 앱 | 텍스트, 음성, 3D 캐릭터 | TTS, 텍스트, 이미지 | 구현됨 |
| CLI | 텍스트 | 텍스트 | 계획 |
| 텔레그램 봇 | 텍스트, 음성메시지 | 텍스트, 이미지 | 계획 |
| 슬랙 봇 | 텍스트 | 텍스트 | 계획 |

### 3D 아바타

- macOS 앱에서 3D 모델이 대화에 반응
- 표정, 제스처 등으로 감정 표현

## 사용 시나리오

### 가정

- 아이들 대화 상대 (3D 캐릭터가 반응하며 대화)
- 가족 구성원별 프로필과 기억 분리
- 웨이크워드로 핸즈프리 음성 인터랙션

### 개발

- CLI로 터미널에서 빠르게 질의
- MCP 서버 연동, 에이전트 태스크 자동화
- Heartbeat로 모니터링/알림 파이프라인 구축

### 업무

- 슬랙/텔레그램에서 팀 채널의 AI 어시스턴트로 활용
- 웹검색 + 미리알림 + 칸반 태스크 관리
- 여러 기기에서 동일한 업무 컨텍스트 유지
