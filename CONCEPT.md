# Dochi - 컨셉 문서

## 이름

"도치"는 고슴도치에서 따왔습니다. 부르기 쉬운 이름이 필요했습니다.

## 핵심 목표

**맥락을 이해하는 AI.**

Siri에게 "내일 일정 알려줘"라고 하면 캘린더를 읽어줍니다. 하지만 내가 누군지, 아이가 요즘 뭘 좋아하는지, 지난주에 뭘 했는지는 모릅니다.

Dochi는 macOS 네이티브 앱으로 집 Mac에 상주합니다. 가족 구성원 각자를 알고, 대화를 기억하고, 맥락 안에서 행동합니다. 아이에게는 눈높이 대화 친구, 부모에게는 일정 비서, 개발자에게는 코딩 에이전트 — 같은 Mac에서 부르는 이름만 다릅니다.

## 어떻게 동작하나

### 워크스페이스로 삶을 나눈다

가족에게는 가족의 맥락이 있고, 팀에는 팀의 맥락이 있습니다. Dochi는 이걸 **워크스페이스**로 나눕니다.

```
"도치야, 민수 숙제 도와줘"      → 가족 워크스페이스 · 가족의 기억
"코디야, PR 리뷰해줘"           → 팀 워크스페이스 · 팀의 기억
"도치야, 내 알러지 뭐였지?"      → 개인 컨텍스트 · 어디서든 동일
```

웨이크워드 하나로 워크스페이스가 전환됩니다. "도치야"는 가족 공간, "코디야"는 팀 공간. 각 워크스페이스는 자기만의 기억을 갖고, 하나의 Mac이 여러 워크스페이스에 동시에 참여합니다.

### 나를 따라다니는 개인 컨텍스트

워크스페이스가 바뀌어도, 디바이스가 바뀌어도, **나에 대한 기억은 그대로**입니다.

개발자가 dotfiles를 GitHub에 올려두고 새 머신에서 환경을 복원하듯, 개인 컨텍스트는 클라우드에 동기화됩니다. 새 워크스페이스에 초대받아도, 새 디바이스를 추가해도, AI가 나를 처음부터 알고 있습니다. 내가 직접 편집할 수 있고, 다른 멤버에게 노출되지 않습니다.

에이전트가 대화할 때, 이 계층들이 하나의 프롬프트로 조합됩니다:

| 계층 | 예시 | 소유 |
|------|------|------|
| 에이전트 지침 | "너는 아이 대화 친구 키키야" | 에이전트의 system.md |
| 워크스페이스 기억 | "고양이 나비", "민수 초등 3학년" | 워크스페이스 멤버 전체 |
| 에이전트 기억 | "민수는 공룡을 좋아함" | 에이전트가 자동 축적 |
| 개인 컨텍스트 | "커피 좋아함", "알러지: 새우" | 사용자 본인 |

### 에이전트마다 역할이 다르다

한 워크스페이스에 여러 에이전트가 공존합니다. 각자 다른 페르소나, 다른 웨이크워드, 다른 권한.

```
"도치야" → 가족 비서. 일정, 미리알림, FaceTime, 다정한 말투
"키키야" → 아이 대화 친구. 이야기, 교육, 안전한 환경
"코디야" → 시니어 개발자. 코드 리뷰, Claude Code 세션 관리, 간결한 말투
```

에이전트를 만드는 건 `system.md` 파일 하나에 페르소나를 적고, 이름과 웨이크워드를 정하면 끝. 권한은 분리되어, 코디는 코딩 도구를 자유롭게 쓸 수 있지만 키키는 쓸 수 없습니다.

### 디바이스는 투명하다

사용자는 디바이스를 신경 쓰지 않습니다. 에이전트에게 말하면, 알맞은 디바이스에서 실행됩니다.

```
[집 Mac에서]
"엄마한테 FaceTime 걸어줘"   → FaceTime 통화 시작
"내일 일정 알려줘"           → 캘린더 조회 → 음성 안내

[업무 Mac에서]
"코디야, 아까 작업 이어서"    → 팀 컨텍스트 그대로 → Claude Code 세션 재개

[외출 중 텔레그램에서]
"밥 먹어!"                   → 집 Mac의 도치가 TTS로 아이들에게 전달
```

집 Mac, 업무 Mac, 텔레그램 — 어디서 말을 걸든 같은 워크스페이스, 같은 기억. 디바이스는 컨텍스트 아래에 추상화되어 있고, 사용자는 그 위에서 목적만 말하면 됩니다.

macOS 네이티브 앱이기 때문에 FaceTime, 미리알림, 캘린더, Apple Shortcuts, 코딩 에이전트까지 OS와 깊이 연동됩니다.

## 사용 시나리오

### 가정 — 집 Mac이 허브

집 Mac이 항상 켜져 있습니다. 도치와 키키가 상주합니다.

- 아이: "키키야, 공룡 이야기 해줘" → 키키는 민수가 공룡을 좋아한다는 걸 기억하고, 눈높이에 맞춰 대화합니다.
- 아이: "도치야, 엄마한테 전화해줘" → FaceTime 통화 시작
- 부모(외출 중): 텔레그램으로 "밥 먹어!" → 집 Mac에서 도치가 TTS로 아이들에게 전달
- 부모: "도치야, 내일 일정 알려줘" → 캘린더 조회 → 음성 안내

가족 워크스페이스의 기억 덕분에, 도치와 키키 모두 아이 이름, 학교, 좋아하는 것을 알고 있습니다.

### 개발 — 디바이스를 넘나드는 작업

집에서 시작한 작업을 업무 Mac에서 이어갑니다. 팀 워크스페이스 기억이 동기화되어 있으니까.

- 집: "코디야, rate limit 추가해줘" → Claude Code 세션 → 코드 수정 → 결과 요약
- 업무 Mac: "코디야, 아까 작업 이어서 해줘" → 같은 팀 컨텍스트로 세션 재개
- 텔레그램: "코디야, 빌드 결과 알려줘" → 업무 Mac에서 실행, 결과를 텔레그램으로 전달

## 아키텍처

```
사용자
├── 개인 컨텍스트                ← 모든 WS에서 접근, 직접 편집
├── 가족 WS
│   ├── 워크스페이스 기억
│   ├── 도치, 키키
│   └── 디바이스: 집 Mac ──┐
└── 팀 WS                   │    같은 Mac이
    ├── 워크스페이스 기억     │    두 WS에 동시 참여
    ├── 코디               │
    └── 디바이스: 집 Mac ──┘, 업무 Mac
```

```
              ┌──────────────────────────────┐
              │     Supabase (동기화 계층)     │
              │  Auth · WS 관리 · 메시지 큐    │
              │  컨텍스트 동기화 · 디바이스 관리  │
              └──────────────┬───────────────┘
                             │
        ┌────────────────────┼────────────────────┐
        │                    │                    │
 ┌──────┴──────┐      ┌─────┴──────┐      ┌─────┴──────┐
 │   집 Mac    │      │  업무 Mac  │      │  메신저 봇  │
 │ [가족+팀 WS]│      │  [팀 WS]  │      │  [팀 WS]  │
 │ 도치·키키·코디│      │   코디    │      │ TG / Slack│
 │ TTS·FaceTime│      │ Claude    │      │ 피어 메시징 │
 │  Shortcuts  │      │  Code     │      │           │
 └─────────────┘      └───────────┘      └───────────┘
```

**클라우드는 동기화만.** LLM 호출, 도구 실행은 전부 디바이스에서 직접.

**디바이스는 독립적인 피어.** 한 피어가 꺼져도 나머지에 영향 없습니다. 여러 워크스페이스의 에이전트가 한 디바이스에서 동시에 활성화되고, 같은 워크스페이스가 여러 디바이스에 걸쳐 동작합니다.

## 설계 원칙

1. **컨텍스트가 핵심** — AI가 나를 알아야 제대로 도울 수 있다. 기억이 행동보다 중요하다
2. **선언적 에이전트** — `system.md` 하나로 에이전트의 모든 것을 정의
3. **로컬 실행** — 실행은 디바이스에서. 클라우드는 동기화만
4. **안전** — 에이전트별 권한 분리, 위험 동작은 반드시 사용자 확인

## 확장 계획

macOS 앱에서 시작하여 텔레그램, 슬랙, CLI로 인터페이스를 넓힙니다. 어디서든 같은 에이전트, 같은 기억, 같은 컨텍스트.

## 영감

로컬 디바이스 제어 아이디어는 [Claude Code](https://claude.com/product/claude-code)와 [OpenClaw](https://github.com/openclaw/openclaw)에서 영향을 받았습니다. 거기에 macOS 네이티브, 워크스페이스 기반 맥락 관리, 홈 어시스턴트 등 개인적으로 필요한 것들을 중심으로 만들고 있습니다.
